
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ikurten.com</title>
  <meta name="author" content="kurten">

  
  <meta name="description" content="其一 10月底杭州离开了杭州一家刚加入不久的创业公司，其中的辛酸，也就不扯了。酸甜苦辣，总是自己吞呗。移动互联网创业的这趟浑水，是越来越混了。花钱买用户，短期内想要做大，接着寻找天使，然后接着花。而某些天使呢，自己投资一些个渠道商，然后顺带介绍给投资的一些做app的创业公司，然后么，一环套着一环， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ikurten.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="ikurten.com" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ikurten.com</a></h1>
  
    <h2>85后码农.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ikurten.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/blog/about/">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/13/%E7%A2%8E%E7%A2%8E%E5%BF%B5/">碎碎念</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-13T13:04:44+08:00" pubdate data-updated="true">2012-12-13</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p style="text-align: center;">其一</p>


<p style="text-align: left;">10月底杭州离开了杭州一家刚加入不久的创业公司，其中的辛酸，也就不扯了。酸甜苦辣，总是自己吞呗。移动互联网创业的这趟浑水，是越来越混了。花钱买用户，短期内想要做大，接着寻找天使，然后接着花。而某些天使呢，自己投资一些个渠道商，然后顺带介绍给投资的一些做app的创业公司，然后么，一环套着一环，产业链就这么来了么。其他人呢，总是不好混，当然，还是有些认认真真做事情的。我啊，还是不趟这趟浑水咯。</p>


<p style="text-align: center;">其二</p>


<p style="text-align: left;">11月份休息，然后么，顺带考考驾照。月中还面了几个公司，本来打算留杭州的，跟家人商量了一下，还是回老家算了。期间出一些小插曲，哎，这段时间真的很背啊。月底报了去泰国的旅游团，晚上的班机来回，走的线路，碰到的基本都是中国旅游团。团费便宜，路线比较坑爹，酒店就别提了。后面几天住的酒店，在很偏的地方，还没有热水，有天晚上还停电，比较悲剧。我们团人比较少，没人参加泰国导游推荐的自费项目，这个自费项目水分太大了，6个项目平均400块钱一项。于是，我们私下自己去参加了一个项目，门票只要400泰铢一个人哦，差不多90块钱啊。</p>


<p style="text-align: center;">其三</p>


<p style="text-align: left;">12月初就回老家工作了，因为要路考，于是还回了趟杭州，顺利拿到驾照。现在么，天天骑电瓶车上下班。早8点晚5点。日子么，就这么过呗。</p>


<p style="text-align: left;"></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/14/redis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%28%E4%BA%8C%29/">Redis源码学习记录(二)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-14T07:23:59+08:00" pubdate data-updated="true">2012-10-14</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>续前面那篇<a href="http://kurchan.com/?p=149">文章</a>。（<a href="http://redis.io/download">源码版本为之前的stable版本2.4.8</a>）</p>

<p>当redis服务启动的时候，会执行aeMain方法，该方法是event loop，他其实就是一个while循环会一直执行。处理tcp链接操作的函数在networking.c中实现,acceptTcpHandler、acceptUnixHandler、acceptCommonHandler。一旦接收到一个tcp链接，acceptCommonHandler就会创建一个redisClient，并且把它加入到event的readable列表中，等待event loop执行readQueryFromClient函数。</p>

<p>接着event loop时执行readQueryFromClient，获取客户端请求，然后执行请求，调用redis.c中processCommand &#8211;> call函数。</p>

<p>在执行循环的时候会有个beforeSleep的void指针，指向redis.c中的beforeSleep函数，这个函数会遍历所有的server.io_ready_clients，重新热入到event loop列表，并执行客户端请求(这是由于redis可以开启virtual memory，有些命令操作可能会被swapped从而被block掉)。配置在redis.conf中vm-enable选项。redis默认不开启vm。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/22/%E4%B9%9D%E6%9C%88%E6%9D%82%E5%BF%B5/">九月杂念</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-22T00:48:59+08:00" pubdate data-updated="true">2012-09-22</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>想做的事情多了，渐渐的也就慢慢懒散了。博客，当初计划的，至少每个月都写吧，也总有段时间老是提不起劲头来写。</p>

<p>本计划年内要看完的几本书，我想，还是看不完的了。<a href="http://book.douban.com/subject/3260311/">《Erlang Programming》</a>这本书年初的时候看的，现在再拿出来翻翻，还是很有收获的。打算重新学习一下C，于是又开始翻翻<a href="http://book.douban.com/subject/1139336/">《C程序设计语言》</a>。一直想学<a href="http://zh.wikipedia.org/zh/LISP">lisp</a>，虽然准备着手开始看<a href="http://groups.csail.mit.edu/mac/projects/scheme/">scheme</a>，主要还是因为<a href="http://book.douban.com/subject/1148282/">《计算机程序的构造和解释》</a>，本打算好好看看，断断续续的，只看了几页。还有<a href="http://book.douban.com/subject/1139426/">《数据结构与算法分析》</a>、<a href="http://book.douban.com/subject/5375620/">《失控》</a>、<a href="http://book.douban.com/subject/6860890/">《黑客》</a>、<a href="http://book.douban.com/subject/3244090/">《Professional Linux Kernel Architecture》</a>。。。买了很多书，基本上，合起来也没看几页啊。</p>

<p>还有4个多月过年，好吧，剩下时间，认真的学习吧。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/09/19/redis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">Redis源码学习记录</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-09-19T00:14:47+08:00" pubdate data-updated="true">2012-09-19</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>最近一直在学习redis的源代码，大致上搞清楚了它是如何启动，载入参数，开始轮询接收tcp请求，以及具体执行tcp请求的方式。参照<a href="http://pauladamsmith.com/articles/redis-under-the-hood.html">《Redis:under the hood》</a> 此文，再对照源码。目前的stable版本，和此文上有些出入，但是大致逻辑上基本一致。</p>

<p>redis按照单线程轮询(epoll、kqueue、select)tcp请求，服务端使用非阻塞IO，具体轮询代码实现，包含在ae.h、ae.c、ae_epoll.c、ae_kqueue.c、ae_select.c。tcp server实现在anet.h、anet.c。</p>

<p>主入口redis.c中的main函数（参照<a href="http://pauladamsmith.com/articles/redis-under-the-hood.html">《Redis:under the hood》</a> 此文），redis.c中的beforeSleep函数会创建所有客户端（server.io_ready_clients）中的event句柄，以及触发event时的调用的函数readQueryFromClient。</p>

<p>java的nio中selector也可以干类似的事情，不过，selector底层实现机制虽然是基于epoll、kqueue、select，但是会有自己链接自己的现象出现。具体参看<a href="http://http://blog.csdn.net/haoel/article/details/2224055">这里</a>。</p>

<p>使用redis需要注意<a href="http://redis.io/topics/latency">latency</a>，一旦某个操作很耗时的话，会导致后续操作也延时。</p>

<p>这方面，<a href="http://www.erlang.org">erlang</a>就好多了。</p>

<p>ps:我用vim+winmanager+ctags+bufferexplorer，具体配置看<a href="http://blog.csdn.net/wooin/article/details/1858917">这里</a>。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/04/07/%E5%85%B3%E4%BA%8E%E6%96%B0%E5%85%AC%E5%8F%B8/">关于新公司</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-07T03:55:24+08:00" pubdate data-updated="true">2012-04-07</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p style="text-align: left;">加入新公司已经差不多有一个多月的时间了，最初么，也接过几个HR的电话，跟其他创业公司的头碰过，犹豫过，也徘徊了一下，还是决定留下来看看吧。这个团队也算一个中型公司下面的一个创业型公司，也可以说是一个创业项目吧。也是一个社区型产品。包括开发、运营在内的，团队基本上也算是草根形式的一帮人吧。我呢，依旧是干服务器这块的开发。目前公司也主要从智能手机客户端这块入手，刚起步，总归还算是慢慢进入状态吧。</p>


<p>创业，或者小项目刚开始还是在于人。目前这个团队，内部分的还是太细，有时候团队内部沟通也不是很有效。最最讨厌的事情，还是在于有很多会议要开。团队还是越小越有效率，三五个人一个团队规模，基本上也算合适。当然，也是因为大多基本没在三五个人的创业团队呆过的，目前这种状态，基本上对于我来说算是很清闲的了。工作强度也不大，我呢，也好好恢复一下。顺便多看看，多学学吧。</p>

<p>这个客户端产品，目前还是有很多地方需要改进，产品这块的出发点我很赞同，功能尽量少、能做到快速迭代，跟踪运营情况及时调整后续产品设计。最初的时候，我想也是快速开发、推出产品。一开始的时候，<a href="http://www.apple.com/ios/">iOS</a>和<a href="http://www.android.com/">Android</a>客户端还是外包出去做的。现在么，收回来自己开发，也算是有点吃力吧。等过了磨合期，我想，也应该是逐渐进入状态的。</p>

<p style="text-align: left;"></p>


<p style="text-align: left;">我呢，刚过了迷茫期，也算逐渐进入自己该有的状态吧。目前么，基本上靠自己摸索，然后慢慢前进了。琢磨着，业余再搞点啥项目什么的。想想现在自己也没啥拿得出手的东西，只能慢慢积累了。</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
	<a href="/blog/about/">About Me</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/13/%E7%A2%8E%E7%A2%8E%E5%BF%B5/">碎碎念</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/14/redis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%28%E4%BA%8C%29/">redis源码学习记录(二)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/22/%E4%B9%9D%E6%9C%88%E6%9D%82%E5%BF%B5/">九月杂念</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/19/redis%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/">redis源码学习记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/07/%E5%85%B3%E4%BA%8E%E6%96%B0%E5%85%AC%E5%8F%B8/">关于新公司</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Links</h1>
  <ul id="recent_posts">
      <li class="post">
        <a href="http://hmfly.info/">GeoVisual(GIS读研南)</a>
      </li>
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/kurten">@kurten</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'kurten',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - kurten -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
