<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ruby | ikurten.com]]></title>
  <link href="http://ikurten.com/blog/categories/ruby/atom.xml" rel="self"/>
  <link href="http://ikurten.com/"/>
  <updated>2014-03-25T20:56:27+08:00</updated>
  <id>http://ikurten.com/</id>
  <author>
    <name><![CDATA[Kurten]]></name>
    <email><![CDATA[chinkurten@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[通过源代码安装ruby-2.0.0-p247]]></title>
    <link href="http://ikurten.com/blog/2013/07/06/install-ruby-2-dot-0-0-p247-from-source/"/>
    <updated>2013-07-06T10:22:00+08:00</updated>
    <id>http://ikurten.com/blog/2013/07/06/install-ruby-2-dot-0-0-p247-from-source</id>
    <content type="html"><![CDATA[<p>前两天心血来潮，想升级一下本机的<a href="http://www.ruby-lang.org">ruby</a>版本，于是下载了最新版本的<a href="http://www.ruby-lang.org">ruby</a>代码，然后</p>

<pre><code>
./configure 
make 
sudo make install
</code></pre>


<p>但是碰到一个问题，openssl can't load。找了很多方法都搞不定，怀疑是本机openssl版本低于0.9.6b，于是重新下载了openssl的代码(1.0.1e版本)编译安装。然后再重新安装<a href="http://www.ruby-lang.org">ruby</a>，然后出来一个</p>

<pre><code>
In file included from openssl_missing.c:22:
openssl_missing.h:71: error: conflicting types for ‘HMAC_CTX_copy’
/usr/include/openssl/hmac.h:102: error: previous declaration of ‘HMAC_CTX_copy’ was here
openssl_missing.h:95: error: conflicting types for ‘EVP_CIPHER_CTX_copy’
/usr/include/openssl/evp.h:502: error: previous declaration of ‘EVP_CIPHER_CTX_copy’ was here
openssl_missing.c:27: error: conflicting types for ‘HMAC_CTX_copy’
/usr/include/openssl/hmac.h:102: error: previous declaration of ‘HMAC_CTX_copy’ was here
openssl_missing.c:122: error: conflicting types for ‘EVP_CIPHER_CTX_copy’
/usr/include/openssl/evp.h:502: error: previous declaration of ‘EVP_CIPHER_CTX_copy’ was here
</code></pre>


<p>以上错误我估计是extconf.rb配置编译header的时候，哪里出错，没有判断完全方法定义函数，导致函数重复定义了。因为对于autoconf的机制以及openssl不熟悉，所以暂时无法深究这个问题，于是简单的对openssl_missing.h打了个补丁，重新编译，问题即可解决。如果make的时候报出以上错误，直接在openssl_missing.h加入</p>

<pre><code>
#define HAVE_HMAC_CTX_COPY 1
#define HAVE_EVP_CIPHER_CTX_COPY 1
</code></pre>


<p>两行，然后<code>make &amp;&amp; sudo make install</code>即可。</p>

<p>have fun :).</p>
]]></content>
  </entry>
  
</feed>
