<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 开源 | ikurten.com]]></title>
  <link href="http://ikurten.com/blog/categories/kai-yuan/atom.xml" rel="self"/>
  <link href="http://ikurten.com/"/>
  <updated>2014-03-02T00:33:54+08:00</updated>
  <id>http://ikurten.com/</id>
  <author>
    <name><![CDATA[Kurten]]></name>
    <email><![CDATA[chinkurten@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[redis源码学习记录(二)]]></title>
    <link href="http://ikurten.com/blog/2012/10/14/redis2/"/>
    <updated>2012-10-14T07:23:59+08:00</updated>
    <id>http://ikurten.com/blog/2012/10/14/redis2</id>
    <content type="html"><![CDATA[<p>续前面那篇<a href="http://ikurten.com/blog/2012/09/19/redis1/">文章</a>。（<a href="http://redis.io/download">源码版本为之前的stable版本2.4.8</a>）</p>

<p>当redis服务启动的时候，会执行aeMain方法，该方法是event loop，他其实就是一个while循环会一直执行。处理tcp链接操作的函数在networking.c中实现,acceptTcpHandler、acceptUnixHandler、acceptCommonHandler。一旦接收到一个tcp链接，acceptCommonHandler就会创建一个redisClient，并且把它加入到event的readable列表中，等待event loop执行readQueryFromClient函数。</p>

<p>接着event loop时执行readQueryFromClient，获取客户端请求，然后执行请求，调用redis.c中processCommand --> call函数。</p>

<p>在执行循环的时候会有个beforeSleep的void指针，指向redis.c中的beforeSleep函数，这个函数会遍历所有的server.io_ready_clients，重新热入到event loop列表，并执行客户端请求(这是由于redis可以开启virtual memory，有些命令操作可能会被swapped从而被block掉)。配置在redis.conf中vm-enable选项。redis默认不开启vm。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ubuntu编译安装php5.3.5]]></title>
    <link href="http://ikurten.com/blog/2011/07/29/46/"/>
    <updated>2011-07-29T04:03:06+08:00</updated>
    <id>http://ikurten.com/blog/2011/07/29/46</id>
    <content type="html"><![CDATA[<div></div>


<div>安装apache，mysql，mysql需要libmysqld-dev</div>


<div>sudo apt-get install libxml2-dev</div>


<div>sudo apt-get install libmysqld-dev</div>


<div>sudo apt-get install libbz2-dev</div>


<div>sudo apt-get install libcurl4-gnutls-dev</div>


<div>sudo apt-get install libmcrypt-dev</div>


<div></div>


<div>./configure &ndash;prefix=/usr/local/php5 &ndash;with-config-file-path=/usr/local/php5/etc &ndash;with-mysql &ndash;with-mysqli &ndash;enable-debug &ndash;with-pic &ndash;disable-rpath &ndash;without-pear &ndash;with-bz2 &ndash;with-apxs2=/usr/local/apache2/bin/apxs &ndash;with-freetype-dir &ndash;with-jpeg-dir &ndash;with-png-dir &ndash;with-zlib &ndash;with-libxml-dir &ndash;enable-xml &ndash;enable-debug &ndash;disable-rpath &ndash;enable-discard-path &ndash;enable-safe-mode &ndash;enable-bcmath &ndash;enable-shmop &ndash;enable-sysvsem &ndash;enable-inline-optimization &ndash;with-curl &ndash;with-curlwrappers &ndash;enable-mbregex &ndash;enable-fastcgi &ndash;enable-force-cgi-redirect &ndash;enable-mbstring &ndash;enable-soap &ndash;enable-sockets &ndash;with-mcrypt</div>


<div></div>


<div>sudo make</div>


<div>sudo make install</div>

]]></content>
  </entry>
  
</feed>
